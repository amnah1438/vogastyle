{% load static %}

<header class="vg-header">

    <!-- ============================
         التوب بار: الدولة + اللغة
    ============================= -->
    <div class="vg-topbar">

        <div class="vg-top-right">

            <!-- اختيار الدولة -->
            <div class="vg-country" id="vgCountryTrigger">

                <img src="{% static 'images/flags/' %}{{ request.session.country|default:'sa' }}.svg"
                     class="vg-flag-current">

                <span class="vg-country-name">
                    {% if request.session.country == "ae" %}
                        الإمارات | AED
                    {% elif request.session.country == "kw" %}
                        الكويت | KWD
                    {% elif request.session.country == "qa" %}
                        قطر | QAR
                    {% elif request.session.country == "bh" %}
                        البحرين | BHD
                    {% else %}
                        السعودية | SAR
                    {% endif %}
                </span>

                <span class="vg-arrow">▼</span>
            </div>

            <!-- قائمة الدول -->
            <div class="vg-country-dropdown" id="vgCountryMenu">

                {% for code, label in countries.items %}
                    <form method="post" action="{% url 'core:set_country' %}">
                        {% csrf_token %}
                        <button name="country" value="{{ code }}">
                            <img src="{% static 'images/flags/' %}{{ code }}.svg">
                            {{ label }}
                        </button>
                    </form>
                {% endfor %}

            </div>

            <!-- اللغة -->
            <form action="/i18n/setlang/" method="post" class="vg-lang">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}">

                {% if request.LANGUAGE_CODE == "ar" %}
                    <input type="hidden" name="language" value="en">
                    <button type="submit" class="vg-lang-btn">EN</button>
                {% else %}
                    <input type="hidden" name="language" value="ar">
                    <button type="submit" class="vg-lang-btn">AR</button>
                {% endif %}
            </form>

        </div>
    </div>

    <!-- ============================
         الهيدر الرئيسي
    ============================= -->
    <div class="vg-main-header">

        <div class="vg-logo">
            <a href="/">
                <img src="{% static 'images/logo.svg' %}" alt="VogaStyle">
            </a>
        </div>

        <form class="vg-search">
            <input type="text" placeholder="ابحثي هنا">
            <button type="submit">
                <img src="{% static 'images/icons/search.svg' %}" alt="Search">
            </button>
        </form>

        <div class="vg-icons">
            <a href="/accounts/profile/">
                <img src="{% static 'images/icons/user.svg' %}">
            </a>

            <a href="/cart/">
                <img src="{% static 'images/icons/cart.svg' %}">
            </a>
        </div>

    </div>

</header>
