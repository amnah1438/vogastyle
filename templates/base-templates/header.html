{% load static %}
<header class="vg-header">

    <!-- ============================
         1) التوب بار (دولة + لغة + روابط)
    ============================= -->
    <div class="vg-topbar vg-container">

        <!-- يمين -->
        <div class="vg-top-right">

            <!-- الدولة -->
            <div class="vg-country" id="vgCountryTrigger">
                <img src="{% static 'images/flags/' %}{{ request.session.country|default:'sa' }}.svg"
                     class="vg-flag-current">

                <span class="vg-country-name">
                    {% if request.session.country == "ae" %}
                        الإمارات | AED
                    {% elif request.session.country == "kw" %}
                        الكويت | KWD
                    {% elif request.session.country == "qa" %}
                        قطر | QAR
                    {% elif request.session.country == "bh" %}
                        البحرين | BHD
                    {% else %}
                        السعودية | SAR
                    {% endif %}
                </span>

                <span class="vg-arrow">▼</span>
            </div>

            <!-- القائمة المنسدلة للدول -->
            <div class="vg-country-menu" id="vgCountryMenu">

                {% for code, name in [
                    ('sa', 'السعودية'),
                    ('ae', 'الإمارات'),
                    ('kw', 'الكويت'),
                    ('qa', 'قطر'),
                    ('bh', 'البحرين')
                ] %}
                <form method="post" action="{% url 'core:set_country' %}">
                    {% csrf_token %}
                    <button name="country" value="{{ code }}">
                        <img src="{% static 'images/flags/' %}{{ code }}.svg"> {{ name }}
                    </button>
                </form>
                {% endfor %}
            </div>

            <!-- اللغة -->
            <form action="/i18n/setlang/" method="post" class="vg-lang">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.path }}">
                
                {% if request.LANGUAGE_CODE == "ar" %}
                    <input type="hidden" name="language" value="en">
                    <button type="submit" class="vg-lang-btn">EN</button>
                {% else %}
                    <input type="hidden" name="language" value="ar">
                    <button type="submit" class="vg-lang-btn">AR</button>
                {% endif %}
            </form>

            <span class="vg-top-link">العروض</span>
            <span class="vg-top-link">المساعدة</span>
            <span class="vg-top-link">تتبع الطلب</span>

        </div>

        <!-- يسار -->
        <div class="vg-top-left">
            <img src="{% static 'icons/user.svg' %}" class="vg-icon">
            <img src="{% static 'icons/cart.svg' %}" class="vg-icon">
            <img src="{% static 'icons/bell.svg' %}" class="vg-icon">
        </div>

    </div>

    <!-- ============================
         2) المستوى الأوسط (الشعار + البحث)
    ============================= -->
    <div class="vg-middle vg-container">

        <!-- البحث -->
        <div class="vg-search-box">
            <input type="text" placeholder="ابحثي عن منتج">
            <button><img src="{% static 'icons/search.svg' %}"></button>
        </div>

        <!-- الشعار -->
        <div class="vg-logo">
            <a href="/" class="vg-brand">VogaStyle</a>
        </div>

        <!-- يسار الأيقونات -->
        <div class="vg-icons">
            <button><img src="{% static 'icons/user.svg' %}"></button>
            <button><img src="{% static 'icons/cart.svg' %}"></button>
            <button><img src="{% static 'icons/bell.svg' %}"></button>
        </div>

    </div>

    <!-- ============================
         3) القائمة الرئيسية
    ============================= -->
    <nav class="vg-nav">
        <ul class="vg-container">
            <li><a href="#">النساء</a></li>
            <li><a href="#">الرجال</a></li>
            <li><a href="#">الأطفال</a></li>
            <li><a href="#">التجميل</a></li>
            <li><a href="#">المنزل</a></li>
            <li><a href="#">العلامات التجارية</a></li>
        </ul>
    </nav>

</header>
