{% load static %}

<header class="vg-header">

    <!-- ================================
         التوب بار: الدولة + اللغة
    ================================= -->
    <div class="vg-topbar">

        <div class="vg-topbar-right">

            <!-- زر تغيير الدولة -->
            <div class="vg-country" id="vgCountryTrigger">

                <img src="{% static 'images/flags/' %}{{ request.session.country|default:'sa' }}.svg"
                     class="vg-flag">

                <span class="vg-country-text">
                    {% if request.session.country == "ae" %} الإمارات | AED
                    {% elif request.session.country == "kw" %} الكويت | KWD
                    {% elif request.session.country == "qa" %} قطر | QAR
                    {% elif request.session.country == "bh" %} البحرين | BHD
                    {% else %} السعودية | SAR
                    {% endif %}
                </span>

                <span class="vg-arrow">▼</span>

            </div>

            <!-- قائمة الدول -->
            <div class="vg-country-menu" id="vgCountryMenu">
                {% for code, label in countries.items %}
                    <form method="post" action="{% url 'core:set_country' %}">
                        {% csrf_token %}
                        <button name="country" value="{{ code }}">
                            <img src="{% static 'images/flags/' %}{{ code }}.svg">
                            {{ label }}
                        </button>
                    </form>
                {% endfor %}
            </div>

            <!-- زر تغيير اللغة -->
            <form action="/i18n/setlang/" method="post" class="vg-lang">
                {% csrf_token %}
                <input type="hidden" name="next" value="/" />

                {% if request.LANGUAGE_CODE == "ar" %}
                    <input type="hidden" name="language" value="en">
                    <button type="submit" class="vg-lang-btn">English</button>
                {% else %}
                    <input type="hidden" name="language" value="ar">
                    <button type="submit" class="vg-lang-btn">العربية</button>
                {% endif %}
            </form>

        </div>

    </div>


    <!-- ================================
         الهيدر الرئيسي
    ================================= -->
    <div class="vg-mainbar">

        <!-- قائمة الأقسام -->
        <nav class="vg-nav">
            <a href="/women/">النساء</a>
            <a href="/men/">الرجال</a>
            <a href="/kids/">الأطفال</a>
            <a href="/beauty/">التجميل</a>
            <a href="/home-category/">المنزل</a>
        </nav>

        <!-- اللوجو -->
        <div class="vg-logo">
            <a href="/">
                <h2 class="vg-logo-text">فــوغــا ســتــايــلــي</h2>
            </a>
        </div>

        <!-- البحث + الأيقونات -->
        <div class="vg-actions">

            <!-- البحث -->
            <form class="vg-search">
                <input type="text" placeholder="{% if request.LANGUAGE_CODE == 'ar' %}ابحث{% else %}Search{% endif %}">
                <button type="submit">
                    <img src="{% static 'images/icons/search.svg' %}">
                </button>
            </form>

            <!-- الأيقونات -->
            <div class="vg-icons">

                <!-- ⭐ أيقونة البحث المضافة (تشغل الـ Overlay) -->
                <img src="{% static 'images/icons/search.svg' %}" class="vg-open-search">

                <img src="{% static 'images/icons/camera.svg' %}">
                <img src="{% static 'images/icons/bell.svg' %}">
                <a href="/accounts/profile/"><img src="{% static 'images/icons/user.svg' %}"></a>
                <a href="/cart/"><img src="{% static 'images/icons/cart.svg' %}"></a>
            </div>

        </div>

    </div>


    <!-- ================================
         SEARCH OVERLAY — FULL SCREEN
    ================================= -->
    <div class="vg-search-overlay" id="vgSearchOverlay">

        <div class="vg-search-box">

            <!-- زر الإغلاق -->
            <button class="vg-search-close" id="vgSearchClose">×</button>

            <!-- شريط البحث -->
            <form action="/search/" method="get" class="vg-search-form">
                <img src="{% static 'images/icons/search.svg' %}" class="vg-search-icon">
                <input type="text" name="q" placeholder="ابحث" autocomplete="off">
            </form>

            <!-- زر البحث بصورة -->
            <button class="vg-search-by-image">
                <img src="{% static 'images/icons/camera.svg' %}">
                البحث عبر صورة
            </button>

        </div>

    </div>

</header>
